{% extends "en/base.html" %}

{% import "en/to_import.html" as to_import %}

{% block title %}Statistics{% endblock %}

{% block stats_main %} w3-teal{% endblock %}

{% block content %}
<h2>This Broadcasts info</h2>
{% if stats["broadcast"]["lang"] == "en": %}
Current message : ❝{{ stats["broadcast"]["content"] }}❞<br>
{% else: %}
Original message : ❝{{ stats["broadcast"]["content"] }}❞<br>
Traducted message : ❝{{ stats["broadcast"]["trads"]["en"] }}❞<br>
Message language : {{ stats["broadcast"]["lang"] }}<br>
{% endif %}
Broadcaster : {{ stats["broadcast"]["author_name"] }}<br>
Upvotes : {{ stats["broadcast"]["upvotes"] }}<br>
Downvotes : {{ stats["broadcast"]["downvotes"] }}<br>
Reports for this message : {{ stats["broadcast"]["reports"] }}<br>

<h2>General Broadcasting info</h2>
Broadcasts sent : {{ stats["broadcasts"]["msgs_sent"] }}<br>
{% for lang_code, number in stats["broadcasts"]["langs_msgs_sent"].items(): %}
Broadcasts in {{ lang_code }} sent : {{ number }}<br>
{% endfor %}
Total words sent : {{ stats["broadcasts"]["words_sent"] }}<br>
Total characters sent : {{ stats["broadcasts"]["characters_sent"] }}<br>

<h2>Users info</h2>
Registered (and not banned) users : {{ stats["users"]["num"] }}<br>
Banned users : {{ stats["users"]["banned"] }}<br>
Number of users that have seen the current broadcast : {{ stats["users"]["seen_msg"] }}<br>
Users who were active in the last hour : {{ stats["users"]["lastact_hour"] }}<br>
Users who were active in the last 24 hour : {{ stats["users"]["lastact_24h"] }}<br>
Users who were active in the last week : {{ stats["users"]["lastact_week"] }}<br>

<h2>Time info</h2>
Uptime : {{ stats["time"]["uptime_str"] }}<br>
Time to get stats : {{ stats["time"]["stats_getting"] * 1000 }} ms<br>

<h2>Top broadcasts in different categories</h2>
<h3>5 most upvoted</h3>
{% for post in stats["top_posts"]["5_most_upped"]: %}
{{ to_import.post(post) }}
<br>
{% endfor %}
<h3>5 most downvoted</h3>
{% for post in stats["top_posts"]["5_most_downed"]: %}
{{ to_import.post(post) }}
<br>
{% endfor %}
<h3>5 most popular (highest upvotes/downvotes ratio)</h3>
{% for post in stats["top_posts"]["5_most_pop"]: %}
{{ to_import.post(post) }}
<br>
{% endfor %}
<h3>5 most unpopular (lowest upvotes/downvotes ratio)</h3>
{% for post in stats["top_posts"]["5_most_unpop"]: %}
{{ to_import.post(post) }}
<br>
{% endfor %}
<small>
    These stats are updated every 10 minutes.<br>
    Click <a href="/stats.json">here</a> to get the raw stats file.
</small>
{% endblock %}