{% extends "base.html" %}

{% block title %}{{ _("Broadcast") }}{% endblock %}

{% block broadcast_main %} w3-teal w3-hover-blue-gray{% endblock %}

{% block content %}
<h1>{{ _("Broadcast") }}</h1>
<h2>{{ _("Before doing anything, read the text below.") }}</h2>
<h3>
    {{ _("You are about to experience greatness. Right now, so much power is in your hands.") }}<br>
    {{ _('But as they always say in the movies "With great power comes great responsability".') }}<br>
    {{ _("And remember that your message will be saved in the history tab forever, so say something meaningful.") }}<br>
    {{ _("I imagine you already have what you are going to say sorted out so before writing your wonderful message to the %(users)s people that signed in to website, make sure the answers to the following questions are all no.", users=stats["users"]["num"]) }}
</h3>
<h4>
    <ul>
        <li>{{ _("Is your message harassing, insulting or encouraging hate against anyone?") }}</li>
        <li>{{ _("Is your message using too much mild language for a family friendly website?") }}</li>
        <li>{{ _('Does your message contain any link (like "http://example.com") or pseudo link (like "example.com") or attempts at putting a link that doesn\'t look like one (like "e x a m p l e . c o m" or "example dot com")?') }}</li>
        <li>{{ _("Could the name you chose offend anyone in any way?") }}</li>
    </ul>
</h4>
<input type="button" value="{{ _('I have read the text above.') }}" id="activatorButton" onclick="enableSubmitButton('submitButton', 'activatorButton')">
<form method="post">
    {{ form.csrf_token }}
    {% if form.csrf_token.errors: %}
    {{ _("There was an error with the csrf token:") }} {{ form.csrf_token.errors }}<br>
    {% endif %}

    {{ form.user_id(value=current_user.id_) }}
    {% if form.user_id.errors: %}
    {{ _("This was not supposed to happen:") }} {{ form.user_id.errors }}<br>
    {% endif %}

    {{ form.message.label }}<br>
    {{ form.message(id="message_input", oninput="updateCharCounter('message_input', 'message_counter')", rows="4", cols="128") }} <span id="message_counter">0/512</span><br>
    {% if form.message.errors: %}
    {{ _("The field above had an error:") }} {{ form.message.errors }}<br>
    {% endif %}

    {{ form.display_name.label }}<br>
    {{ form.display_name(id="name_input", oninput="updateCharCounter('name_input', 'name_counter')", size="64") }} <span id="name_counter">0/64</span><br>
    {% if form.display_name.errors: %}
    {{ _("The field above had an error:") }} {{ form.display_name.errors }}<br>
    {% endif %}

    {{ form.brod_code.label }}<br>
    {{ form.brod_code(id="code_input", oninput="updateCharCounter('code_input', 'code_counter')", placeholder=_("For example:") + " Drmhze6E...", size="43") }} <span id="code_counter">0/43</span><br>
    {% if form.brod_code.errors: %}
    {{ _("The field above had an error:") }} {{ form.brod_code.errors }}<br>
    {% endif %}

    {{ form.submit(id="submitButton", style="cursor: not-allowed;", disabled=True) }}
</form>
{% endblock %}